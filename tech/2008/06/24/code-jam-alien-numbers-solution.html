<!DOCTYPE html> <html> <head> <meta charset=utf-8> <meta content='IE=edge,chrome=1' http-equiv=X-UA-Compatible> <!--[if (lt IE 9)&(!IEMobile)]><script src="/javascripts/html5.js?1534599221"></script><![endif]--> <meta content='width=device-width, initial-scale=1.0' name=viewport> <title>Google Code Jam之Alien Numbers之我的解答</title> <link href="/stylesheets/site.css?1534599221" rel=stylesheet /> <link href="/stylesheets/blog.css?1534599221" rel=stylesheet /> <link href="/stylesheets/highlight/railscasts.css?1534599221" rel=stylesheet /> <!--[if lt IE 9]><script src="/javascripts/respond.js?1534599221"></script><![endif]--> </head> <body class=''> <div id=container> <div id=main role=main> <aside class=sidebar> <nav> <span> <a href='/tech/'>home</a> </span> <span> <a href='/tech/calendar.html'>calendar</a> </span> <span> <a href='/tech/tags.html'>tags</a> </span> </nav> </aside> <div class=content> <header> <div class=article_nav> <span class=later> <a href='/tech/2008/07/09/after-exam.html'> < 更新 </a> </span> <span class=earlier> <a href='/tech/2008/06/21/hooray.html'> 更早 > </a> </span> </div> <h1> Google Code Jam之Alien Numbers之我的解答 </h1> </header> <article class=markdown-body> <p>由于时间的限制，程序有些地方的容错性不够，以//!! 标出。</p> <p>运行成功，经Google Code Jam鉴定为正确。</p> <p>题目为：</p> <h2>Alien Numbers</h2> <h3>Problem</h3> <p>The decimal numeral system is composed of ten digits, which we represent as &quot;0123456789&quot; (the digits in a system are written from lowest to highest). Imagine you have discovered an alien numeral system composed of some number of digits, which may or may not be the same as those used in decimal. For example, if the alien numeral system were represented as &quot;oF8&quot;, then the numbers one through ten would be (F, 8, Fo, FF, F8, 8o, 8F, 88, Foo, FoF). We would like to be able to work with numbers in arbitrary alien systems. More generally, we want to be able to convert an arbitrary number that&#39;s written in one alien system into a second alien system.</p> <h3>Input</h3> <p>The first line of input gives the number of cases, N . N test cases follow. Each case is a line formatted as</p> <pre><code>alien_number source_language target_language
</code></pre> <p>Each language will be represented by a list of its digits, ordered from lowest to highest value. No digit will be repeated in any representation, all digits in the alien number will be present in the source language, and the first digit of the alien number will not be the lowest valued digit of the source language (in other words, the alien numbers have no leading zeroes). Each digit will either be a number 0-9, an uppercase or lowercase letter, or one of the following symbols </p> <pre><code>!&quot;#$%&amp;&#39;()*+,-./:;&lt;=&gt;?@[\]^_`{|}~
</code></pre> <h3>Output</h3> <p>For each test case, output one line containing &quot;Case #x : &quot; followed by the alien number translated from the source language to the target language.</p> <h3>Limits</h3> <p>1 ≤ N ≤ 100.</p> <h3>Small dataset</h3> <p>1 ≤ num digits in alien_number ≤ 4, 2 ≤ num digits in source_language ≤ 10, 2 ≤ num digits in target_language ≤ 10.</p> <h3>Large dataset</h3> <p>1 ≤ alien_number (in decimal) ≤ 1000000000, 2 ≤ num digits in source_language ≤ 94, 2 ≤ num digits in target_language ≤ 94.</p> <h3>Sample</h3> <table><thead> <tr> <th>Input</th> <th>Output</th> </tr> </thead><tbody> <tr> <td><code>4</code></td> <td></td> </tr> <tr> <td><code>9 0123456789 oF8</code></td> <td>Case #1: Foo</td> </tr> <tr> <td><code>Foo oF8 0123456789</code></td> <td>Case #2: 9</td> </tr> <tr> <td><code>13 0123456789abcdef 01</code></td> <td>Case #3: 10011</td> </tr> <tr> <td><code>CODE O!CDE? A?JM!.</code></td> <td>Case #4: JAM!</td> </tr> </tbody></table> <h2>我的解答的源代码</h2> <pre><code class="cpp">#include &lt;iostream&gt;
#include &lt;fstream&gt;
#include &lt;iterator&gt;

using namespace std;

//A helper function to improve performance of power, basically copied from &lt;stl_numeric.h&gt; of SGI STL
inline long power(long x, long n)
{
    if(n == 0) return 1;
    else
    {
        while((n &amp; 1) == 0)
        {
            n &gt;&gt;= 1;
            x *= x;
        }

        long y = x;
        n &gt;&gt;=1;
        while(n != 0)
        {
            x *= x;
            if((n &amp; 1) != 0)
                y *= x;
            n &gt;&gt;=1;
        }
        return y;
    }
}

int main(int argc, char* argv[])
{
    //Only for memerizing usage for myself
    if(argc != 3)
    {
        cout &lt;&lt; &quot;Usage: nstrans INPUT_FILE OUTPUT_FILE&quot; &lt;&lt; endl;
        return 0;
    }

    ifstream fin(argv[1]); //!!
    ofstream fout(argv[2]); //!!

    //How many cases in total?
    int case_max;
    fin &gt;&gt; case_max;
    fin.ignore(); // &#39;&#39;

    string source_number;
    string source_language;
    string target_language;
    string target_number;

    int source_digits; //How many digits in source_number?
    int source_base; //How many digits in source_language?
    int target_base; //How many digits in target_language?

    long num; //alien number in demical, since it&#39;s less than 1000000000, it&#39;s in long&#39;s range----assert(sizeof(long) &gt;= 4)

    char tmp; //for storing a temp char

    for(int cur_case = 1; cur_case &lt;= case_max; cur_case++)
    {
        //some cleanup
        num = 0;
        source_number = source_language = target_language = target_number = &quot;&quot;;

        //tear the case apart
        while((tmp = fin.get()) != &#39; &#39;) source_number += tmp; //!!
        while((tmp = fin.get()) != &#39; &#39;) source_language += tmp; //!!
        while((tmp = fin.get()) != &#39;\n&#39;) target_language += tmp; //!!

        //
        source_digits = source_number.length();
        source_base = source_language.length();
        target_base = target_language.length();

        int e; //exponent

        //source number to decimal value
        for(e = 0; e &lt; source_digits; e++)
        {
            num += source_language.find((source_number[source_digits-1 - e])) * power(source_base, e);
        }

        #ifdef MY_DEBUG
            cout &lt;&lt; source_number &lt;&lt; &#39; &#39; &lt;&lt; num &lt;&lt;&#39; &#39;;
        #endif

        //decimal value to target number(reversal order)
        e = 1;
        while(num &gt; 0)
        {
            target_number += target_language[num % target_base];
            num /= target_base;
        }

        fout &lt;&lt; &quot;Case #&quot; &lt;&lt; cur_case &lt;&lt; &quot;: &quot;;

        //reverse the target number and output
        ostream_iterator&lt;char&gt; foutit(fout);
        copy(target_number.rbegin(), target_number.rend(), foutit);

        fout &lt;&lt; endl;

        #ifdef MY_DEBUG
        ostream_iterator&lt;char&gt; outit(cout);
        copy(target_number.rbegin(), target_number.rend(), outit);
        cout &lt;&lt; endl;
        #endif
    }

    return 0;
}
</code></pre> <section class=meta> <p> <span class=author> <a href='/'>宋皿</a> </span> <span class=time> <time datetime='2008-06-24 00:00:00 +0800'> 2008-06-24 </time> </span> </p> <p> <span class=license> Published under <a href='http://creativecommons.org/licenses/by-nc-nd/3.0/' rel=license>(CC) BY-NC-ND</a> </span> <span class=tags> tagged with <a href='/tech/tags.html#tag-自学记录'> 自学记录 </a> </span> </p> </section> <div id=disqus_thread></div> <script>
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'utensil-at-github'; // required: replace example with your forum shortname
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script> <a class=dsq-brlink href='http://disqus.com'> comments powered by <span class=logo-disqus>Disqus</span> </a> </article> </div> </div> </div> <script src="/javascripts/jquery-1.7.1.js?1534599221"></script> <script src="/javascripts/highlight.pack.js?1534599221"></script> <script>
  hljs.initHighlightingOnLoad();
  // $(document).ready(function() {
  //   $('pre code').each(function(i, e) {hljs.highlightBlock(e)});
  // });
</script> <script>
  // (function(e,b){if(!b.__SV){var a,f,i,g;window.mixpanel=b;a=e.createElement("script");a.type="text/javascript";a.async=!0;a.src=("https:"===e.location.protocol?"https:":"http:")+'//cdn.mxpnl.com/libs/mixpanel-2.2.min.js';f=e.getElementsByTagName("script")[0];f.parentNode.insertBefore(a,f);b._i=[];b.init=function(a,e,d){function f(b,h){var a=h.split(".");2==a.length&&(b=b[a[0]],h=a[1]);b[h]=function(){b.push([h].concat(Array.prototype.slice.call(arguments,0)))}}var c=b;"undefined"!== typeof d?c=b[d]=[]:d="mixpanel";c.people=c.people||[];c.toString=function(b){var a="mixpanel";"mixpanel"!==d&&(a+="."+d);b||(a+=" (stub)");return a};c.people.toString=function(){return c.toString(1)+".people (stub)"};i="disable track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config people.set people.set_once people.increment people.append people.track_charge people.clear_charges people.delete_user".split(" ");for(g=0;g<i.length;g++)f(c,i[g]); b._i.push([a,e,d])};b.__SV=1.2}})(document,window.mixpanel||[]); mixpanel.init("eda89891866a7e90b6699df21e79ea61");
  // mixpanel.track("visit");
</script> </body> </html>